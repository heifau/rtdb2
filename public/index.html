<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
  <meta http-equiv="Pragma" content="no-cache" />
  <meta http-equiv="Expires" content="0" />
  <title>Welcome to Firebase Hosting</title>
  <!-- update the version number as needed -->
  <script defer src="/__/firebase/9.17.1/firebase-app-compat.js"></script>
  <!-- include only the Firebase features as you need -->
  <script defer src="/__/firebase/9.17.1/firebase-auth-compat.js"></script>
  <script defer src="/__/firebase/9.17.1/firebase-database-compat.js"></script>
  <!--       initialize the SDK after all desired features are loaded, set useEmulator to false
     to avoid connecting the SDK to running emulators. -->
  <script defer src="/__/firebase/init.js?useEmulator=true"></script>
  <!--  <script src="script1.js"></script> -->
  <script>
    var script = document.createElement('script');
    script.src = 'script1.js' + '?rnd=' + Math.random();
    document.write(script.outerHTML);
  </script>


</head>

<body>
  <div id="message">
    <h2>Welcome</h2>
    <h1>Firebase Hosting Setup Complete</h1>
    Project Console: <a
      href="https://console.firebase.google.com/project/rtdb-b44bd/overview">https://console.firebase.google.com/project/rtdb-b44bd/overview</a>
    <br>
    Hosting URL: https://rtdb-b44bd.web.app
    <br>
    Emulater URL: http://localhost:5000
    <a target="_blank" href="https://firebase.google.com/docs/hosting/">Open Hosting Documentation</a>
  </div>
  <label for="Zahl1">Zahl1</label>
  <input type="text" id="Zahl1" name="Zahl1" size="10">
  <br>
  <label for="Zahl2">Zahl2</label>
  <input type="text" id="Zahl2" name="Zahl2" size="10">
  <br>
  <p id="load">Firebase SDK Loading&hellip;</p>
  <script type="module">
    // Import the functions you need from the SDKs you need
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.17.2/firebase-app.js";
    import { getDatabase, ref, child, get, set, onValue, connectDatabaseEmulator } from "https://www.gstatic.com/firebasejs/9.17.2/firebase-database.js";

    // TODO: Add SDKs for Firebase products that you want to use
    // https://firebase.google.com/docs/web/setup#available-libraries

    // Your web app's Firebase configuration
    // For Firebase JS SDK v7.20.0 and later, measurementId is optional
    const firebaseConfig = {
      apiKey: "AIzaSyAhp7vaWxas7EKc-9iPUdNfPg2tdz-_w54",
      authDomain: "rtdb-b44bd.firebaseapp.com",
      databaseURL: "https://rtdb-b44bd-default-rtdb.europe-west1.firebasedatabase.app",
      projectId: "rtdb-b44bd",
      storageBucket: "rtdb-b44bd.appspot.com",
      messagingSenderId: "149016988683",
      appId: "1:149016988683:web:f225b5a27e3f53be860b0e",
      measurementId: "G-7WWHZQ9FWC"
    };

    function updatertdb(e) {
      console.log("updateddb: " + e.target.name + "  " + e.target.value);
      set(ref(db, '/Zahlen/' + e.target.name), e.target.value);
    }

    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    // Initialize Realtime Database and get a reference to the service
    const db = getDatabase(app);
    console.log(location.hostname);
    if (location.hostname === "localhost") {
      // Point to the RTDB emulator running on localhost.
      connectDatabaseEmulator(db, "localhost", 9000);
    };
    set(ref(db, '/Zahlen/Zahl1'), 11);
    set(ref(db, '/Zahlen/Zahl2'), 222);
    set(ref(db, '/Zahlen/Zahl3'), 3333);

    var zaehler = 0;
    document.addEventListener('DOMContentLoaded', function () {
      const loadEl = document.querySelector('#load');
      // // The Firebase SDK is initialized and available here!
      // firebase.auth().onAuthStateChanged(user => { });
      firebase.database().ref('/Zahlen/Zahl1').on('value', snapshot => {
        zaehler = zaehler + 1;
        document.getElementById("Zahl1").value = snapshot.val();
        console.log(zaehler)
      });
      let myref = ref(db, '/Zahlen/Zahl2');
      onValue(myref, (snapshot) => {
        zaehler = zaehler + 1;
        document.getElementById("Zahl2").value = snapshot.val();
        console.log(zaehler)
      });
      let alluin = document.querySelectorAll("input");
      alluin.forEach((uin) => {
        uin.addEventListener("change", updatertdb);
      });

      //

      try {
        let app = firebase.app();
        let features = [
          'auth',
          'database',
        ].filter(feature => typeof app[feature] === 'function');
        loadEl.textContent = `Firebase SDK loaded with ${features.join(', ')}`;
      } catch (e) {
        console.error(e);
        loadEl.textContent = 'Error loading the Firebase SDK, check the console.';
      };
      console.log("Script nach try")
      var einzufuegendesObjekt = document.createElement("a");
      einzufuegendesObjekt.href = "http://www.html-seminar.de";
      einzufuegendesObjekt.innerHTML = "Tutorial f√ºr HTML, CSS und JavaScript";
      document.body.appendChild(einzufuegendesObjekt);
      ein_div();

    });
  </script>
</body>

</html>